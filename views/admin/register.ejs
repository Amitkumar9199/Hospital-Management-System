<% layout('layouts/boilerplate')%>
<div class="container">
  <div class="col-sm-6 col-sm-offset-3">
    <h1><span class="fa fa-sign-in"></span> Register</h1>
    <form action="/admin/register" method="post" class="validated-form">
      <div class="form-group">
        <label>Email</label>
        <input type="email" class="form-control" name="email" required />
        <div class="valid-feedback">Looks good!</div>
      </div>
      <div class="form-group">
        <label>Password</label>
        <input type="password" class="form-control" name="password" required />
        <div class="valid-feedback">Looks good!</div>
      </div>
      <div class="form-group">
        <label for="category">Category</label>
        <select name="category" id="category" class="form-control">
          <option value="admin">Admin</option>
          <option value="frontdesk">Front-Desk User</option>
          <option value="doctor">Doctor</option>
          <option value="dataentry">Data Entry User</option>
        </select>
      </div>
      <button type="submit" class="btn btn-warning btn-lg">Register</button>
    </form>
    <hr />
  </div>
</div>

<script>
  const category = document.getElementById('category');
  category.addEventListener('change', () => {
    if (category.value === 'doctor') {
      const form = document.querySelector('.validated-form');
      const doctor = document.querySelector('.doctor');
      if (!doctor) {
        const newFormGroup = document.createElement('div');
        newFormGroup.classList.add('doctor');
        newFormGroup.innerHTML = `
        <div class="form-group">
  <label>Name</label>
  <input type="text" class="form-control" name="Name" required />
  <div class="valid-feedback">Looks good!</div>
</div>
<div class="form-group">
  <label>Department</label>
  <input type="text" class="form-control" name="Department" required />
  <div class="valid-feedback">Looks good!</div>
</div>
<div class="form-group">
  <label>Date of Joining</label>
  <input type="date" class="form-control" name="DateOfJoining" required />
  <div class="valid-feedback">Looks good!</div>
</div>
<div class="form-group">
  <label>Position</label>
  <input type="text" class="form-control" name="Position" required />
  <div class="valid-feedback">Looks good!</div>
</div>
<div class="form-group">
  <label for="Gender">Gender</label>
  <select name="Gender" id="Gender" class="form-control">
    <option value="male">Male</option>
    <option value="Female">Female</option>
    <option value="PreferNotToSay">Prefer Not To Say</option>
  </select>
</div>
      `;
        form.insertBefore(newFormGroup, form.lastElementChild);
      }
    } else {
      const doctor = document.querySelector('.doctor');
      if (doctor) {
        doctor.remove();
      }
    }
  });
</script>
